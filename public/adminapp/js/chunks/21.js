(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{mmhp:function(t,e,s){var a=s("zfzo");"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,i);a.locals&&(t.exports=a.locals)},x76A:function(t,e,s){"use strict";s("mmhp")},zHi2:function(t,e,s){"use strict";s.r(e);var a=s("VTBJ"),i=(s("FNk8"),s("L2JU")),n={components:{BootstrapAlert:s("vkmG").a},data:function(){return{status:"",activeField:"",depts:[],sites:[],date:{disabledDates:{to:new Date(new Date-864e5)}}}},computed:Object(a.a)({},Object(i.c)("PkabItemsSingle",["entry","loading","lists"])),mounted:function(){this.fetchCreateData()},beforeDestroy:function(){this.resetState()},methods:Object(a.a)(Object(a.a)({},Object(i.b)("PkabItemsSingle",["storeData","resetState","setReqDate","setBu","setDept","setItems","setItemName","setItemMerk","setItemSpesifikasi","setItemQty","setItemSatuan","setSite","addItem","deleteItem","fetchCreateData"])),{},{updateReqDate:function(t){this.setReqDate(t)},updateBu:function(t){var e=this;this.setDept([]),this.setSite([]),this.setBu(t),null!=t?(axios.get("/budept",{params:{bu:t}}).then((function(t){e.depts=t.data})).catch((function(t){console.log(t)})),axios.get("/busite",{params:{bu:t}}).then((function(t){e.sites=t.data})).catch((function(t){console.log(t)}))):(this.depts=[],this.sites=[])},updateDept:function(t){this.setDept(t)},updateSite:function(t){this.setSite(t)},submitForm:function(){var t=this;this.storeData().then((function(){t.$router.push({name:"pkab_items.index"}),t.$eventHub.$emit("create-success")})).catch((function(e){t.status="failed",_.delay((function(){t.status=""}),3e3)}))},focusField:function(t){this.activeField=t},clearFocus:function(){this.activeField=""},updateItemName:function(t,e,s){s=e.target.value,this.setItemName({index:t,val:s})},updateItemMerk:function(t,e,s){s=e.target.value,this.setItemMerk({index:t,val:s})},updateItemSpec:function(t,e,s,a,i){s.style.cssText="height: ".concat(s.scrollHeight,"px !important;"),a.spesifikasiHeight="".concat(s.scrollHeight,"px"),i=e.target.value,this.setItemSpesifikasi({index:t,val:i})},updateItemQty:function(t,e,s){s=e.target.value,this.setItemQty({index:t,val:s})},updateItemSatuan:function(t,e){console.log(e),this.setItemSatuan({index:t,val:e})},addNewRow:function(){this.addItem()},deleteRow:function(t){var e=this;this.$swal({title:"Hapus Item ini ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showCloseButton:!0}).then((function(s){s.isConfirmed&&e.deleteItem(t)}))}})},o=(s("x76A"),s("KHd+")),r=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header card-header-primary card-header-icon"},[t._m(0),t._v(" "),e("h4",{staticClass:"card-title"},[t._v("\n              "+t._s(t.$t("global.create"))+"\n              "),e("strong",[t._v("PKAB")])])]),t._v(" "),e("div",{staticClass:"card-body"},[e("back-button")],1),t._v(" "),e("div",{staticClass:"card-body"},[e("bootstrap-alert"),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group bmd-form-group",class:{"is-filled":t.entry.req_date,"is-focused":"req_date"==t.activeField}},[e("label",{},[t._v(t._s(t.$t("cruds.pkabItem.fields.req_date")))]),t._v(" "),e("vuejs-datepicker",{attrs:{"input-class":"form-control",format:"dd-MM-yyyy","disabled-dates":t.date.disabledDates,value:t.entry.req_date_front_end},on:{input:t.updateReqDate}})],1),t._v(" "),e("div",{staticClass:"form-group bmd-form-group",class:{"is-filled":null!==t.entry.bu_id,"is-focused":"bu"==t.activeField}},[e("label",{},[t._v(t._s(t.$t("cruds.pkabItem.fields.bu")))]),t._v(" "),e("v-select",{key:"bu-field",attrs:{name:"bu",label:"name",value:t.entry.bu_id,options:t.lists.bu,reduce:function(t){return t.id}},on:{input:t.updateBu,search:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"focus",void 0,e.key,void 0)?null:t.focusField("bu")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"blur",void 0,e.key,void 0)?null:t.clearFocus.apply(null,arguments)}]}})],1),t._v(" "),e("div",{staticClass:"form-group bmd-form-group",class:{"is-filled":null!==t.entry.site_id,"is-focused":"site"==t.activeField}},[e("label",{},[t._v(t._s(t.$t("cruds.pkabItem.fields.site")))]),t._v(" "),e("v-select",{key:"site-field",attrs:{name:"site",label:"name",value:t.entry.site_id,options:t.sites,reduce:function(t){return t.id}},on:{input:t.updateSite,search:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"focus",void 0,e.key,void 0)?null:t.focusField("site")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"blur",void 0,e.key,void 0)?null:t.clearFocus.apply(null,arguments)}]}})],1),t._v(" "),e("div",{staticClass:"form-group bmd-form-group",class:{"is-filled":null!==t.entry.dept_id,"is-focused":"dept"==t.activeField}},[e("label",{},[t._v(t._s(t.$t("cruds.pkabItem.fields.dept")))]),t._v(" "),e("v-select",{key:"dept-field",attrs:{name:"dept",label:"name",value:t.entry.dept_id,options:t.depts,reduce:function(t){return t.id}},on:{input:t.updateDept,search:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"focus",void 0,e.key,void 0)?null:t.focusField("dept")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"blur",void 0,e.key,void 0)?null:t.clearFocus.apply(null,arguments)}]}})],1)])])],1),t._v(" "),t._m(1),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"card-body"},[e("bootstrap-alert"),t._v(" "),e("table",{staticClass:"table table-bordered",attrs:{name:"inputItem"}},[t._m(2),t._v(" "),e("tbody",t._l(t.entry.items,(function(s,a){return e("tr",{key:a},[e("td",{staticClass:"trashIconContainer",attrs:{scope:"row"}},[e("i",{staticClass:"fa fa-trash-o",on:{click:function(e){return t.deleteRow(a,s)}}})]),t._v(" "),e("td",[e("textarea",{staticClass:"form-control wrapText",attrs:{type:"text",required:""},domProps:{value:s.name},on:{input:function(e){return t.updateItemName(a,e)}}})]),t._v(" "),e("td",[e("textarea",{staticClass:"form-control wrapText",attrs:{type:"text",required:""},domProps:{value:s.merk},on:{input:function(e){return t.updateItemMerk(a,e)}}})]),t._v(" "),e("td",{style:{height:s.spesifikasiHeight}},[e("textarea",{staticClass:"form-control wrapText",attrs:{required:""},domProps:{value:s.spesifikasi},on:{input:function(e){return t.updateItemSpec(a,e,e.target,s)}}})]),t._v(" "),e("td",[e("input",{staticClass:"form-control wrapText",attrs:{type:"number",required:""},domProps:{value:s.qty},on:{input:function(e){return t.updateItemQty(a,e)}}})]),t._v(" "),e("td",[e("v-select",{key:"satuan-field",attrs:{name:"satuan",label:"name",value:s.satuan,options:t.lists.satuan,required:""},on:{input:function(e){return t.updateItemSatuan(a,e)}}})],1)])})),0)]),t._v(" "),e("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.addNewRow}},[e("i",{staticClass:"fa fa-plus-circle"}),t._v("\n                Add Item\n            ")])],1),t._v(" "),e("div",{staticClass:"card-footer"},[e("vue-button-spinner",{staticClass:"btn-primary",attrs:{status:t.status,isLoading:t.loading,disabled:t.loading}},[t._v("\n              "+t._s(t.$t("global.save"))+"\n            ")])],1)])])])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"card-icon"},[t("i",{staticClass:"material-icons"},[this._v("add")])])},function(){var t=this._self._c;return t("div",{staticClass:"card-header card-header-primary card-header-icon"},[t("h4",{staticClass:"card-title"},[t("strong",[this._v("Item")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("th"),t._v(" "),e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Merk")]),t._v(" "),e("th",[t._v("Spesifikasi")]),t._v(" "),e("th",[t._v("Qty")]),t._v(" "),e("th",[t._v("Satuan")])])}],!1,null,"5e35a632",null);e.default=r.exports},zfzo:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,".trashIconContainer[data-v-5e35a632]:hover{cursor:pointer;color:red}",""])}}]);